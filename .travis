language: java
jdk:
  - oraclejdk11
env: #necessary to allow build failures
stages:
  - compile
  - test
  - jar
jobs:
  include:
    - stage: compile
      script: ./gradlew assemble -x jar -x bootJar
    - stage: test
      script: ./gradlew test
    - stage: jar
      script: ./gradlew bootJar
	- stage: deploy to production
      script: skip
      deploy:
        <<: *heroku
        app: omami